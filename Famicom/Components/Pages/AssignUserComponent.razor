@inherits ComponentBase 

<style>
    .selected {
        background-color: #1E88E5 !important; 
    }

        .selected > td {
            color: white !important; 
        }
</style>

<MudContainer Class="d-flex justify-content-center align-items-center" Style="margin: 100px;">
    <MudPaper Class="pa-4">
        <MudText Typo="Typo.h6" Style="text-align: center;">Assign Table</MudText>
        <div class="d-flex flex-column mt-4">
            <MudTable T="ITable" Items="Tables" Class="mb-4" Height="225px" Hover="true" 
                      FixedHeader="true"
                      Breakpoint="Breakpoint.Sm" @ref="mudTable"
                      RowClass="cursor-pointer" 
                      RowClassFunc="@SelectedRowClassFunc" 
                      OnRowClick="RowClickEvent"
                      Filter="new Func<ITable,bool>(FilterFunc)">
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Select Table</MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="searchString" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="MudBlazor.Size.Medium" Class="mt-0"></MudTextField>
                </ToolBarContent>
                <HeaderContent>
                    <MudTh>Table Name</MudTh>
                    <MudTh>Manufacturer</MudTh>
                    <MudTh>GUID</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Table Name">@context.Name</MudTd>
                    <MudTd DataLabel="Manufacturer">@context.Manufacturer</MudTd>
                    <MudTd DataLabel="GUID">@context.GUID</MudTd>
                </RowTemplate>
            </MudTable>
        </div>
        <div class="d-flex flex-column mt-4">
            <MudTable T="IUser" Items="Users" Class="mb-4" Height="225px" style="margin: auto" Hover="true"
                      FixedHeader="true" 
                      Filter="new Func<IUser,bool>(FilterFuncUser)"
                      Breakpoint="Breakpoint.Sm" @ref="mudUser"
                      RowClass="cursor-pointer"
                      RowClassFunc="@USerSelectedRowClassFunc"
                      OnRowClick="UserRowClickEvent">
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Select User</MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="userSearchString" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="MudBlazor.Size.Medium" Class="mt-0"></MudTextField>
                </ToolBarContent>
                <HeaderContent>
                    <MudTh>UserId</MudTh>
                    <MudTh>User Name</MudTh>
                    <MudTh>User Email</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="UserId">@context.UserID</MudTd>
                    <MudTd DataLabel="User Name">@context.Name</MudTd>
                    <MudTd DataLabel="User Email">@context.Email</MudTd>
                </RowTemplate>
            </MudTable>
        </div>
        <div class="d-flex justify-content-center mt-4">
            <MudButton Variant="Variant.Filled" Color="MudBlazor.Color.Secondary" OnClick="Cancel">Cancel</MudButton>
            <MudSpacer />
            <MudButton Variant="Variant.Filled" Color="MudBlazor.Color.Primary" OnClick="AssignTable">Assign</MudButton>
        </div>
    </MudPaper>
</MudContainer>
